# API для проекта YaMDb

## Описание

Проект YaMDb собирает отзывы пользователей на произведения. Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий может быть расширен администратором. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку. Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти; из пользовательских оценок формируется усреднённая оценка произведения — рейтинг. На одно произведение пользователь может оставить только один отзыв.

К проекту по адресу http://127.0.0.1:8000/redoc/ подключена документация API YaMDb.

## Стек технологий

* проект написан на Python с использованием веб-фреймворка Django REST Framework
* библиотека Simple JWT - работа с JWT-токеном
* библиотека django-filter - фильтрация запросов
* база данных - SQLite
* система управления версиями - git

## Алгоритм регистрации новых пользователей

1. Для добавления нового пользователя нужно отправить POST-запрос с параметрами email и username на эндпоинт /api/v1/auth/signup/.
2. Сервис YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на указанный адрес email.
3. Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
4. В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.
5. Если пользователя создаёт администратор, например, через POST-запрос на эндпоинт api/v1/users/ — письмо с кодом отправлять не нужно (описание полей запроса для этого случая — в документации).

## Запуск проекта

Клонировать репозиторий:
```
    git clone git@github.com:n-roman/api_yamdb.git
```

Развернуть и активировать виртуальное окружение:
```
    python -m venv venv
    source venv/Scripts/activate
```

Установить зависимости из файла requirements.txt:
```
    python -m pip install --upgrade pip
    pip install -r requirements.txt
```

Выполнить миграции:
```
    python manage.py migrate
```

Создать суперпользователя:
```
    python manage.py createsuperuser
```

Запустить проект:
```
    python manage.py runserver
```

## Пример http-запроса (POST) Добавление комментария к отзыву:

```
url = 'http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/'
data = {'text': 'Your comment'}
headers = {'Authorization': 'Bearer your_token'}
request = requests.post(url, data=data, headers=headers)
```

## Ответ API_YamDB:

```
Статус- код 200

{
 "id": 0,
 "text": "string",
 "author": "string",
 "pub_date": "2023-02-08T22:15:22Z"
}
```

## Авторы:

* Екатерина Карандеева
* Иван Ильин
* Роман Носов
